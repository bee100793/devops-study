Shell Script & Variable 자동화 실습
1. 변수(Variable)의 이해: "변할 수 있는 문자"
변수는 데이터를 담는 그릇이자, 나중에 값이 바뀌어도 코드 전체를 수정하지 않게 해주는 **'별명'**이다.

📝 핵심 규칙
대입: NAME="bee" (리눅스 셸에서는 = 앞뒤 공백 금지)

참조: $NAME (변수를 꺼낼 때는 앞에 $를 붙임)

자료형 구분: 문자는 " "를 사용하고, 계산이 필요한 숫자는 따옴표 없이 사용함.

관습: 시스템 설정이나 중요한 값(상수)은 UPPER_CASE(대문자)로, 일반 변수는 lower_case(소문자)로 작성하여 가독성을 높임.

2. Shell Script 자동화: "레시피 만들기"
Vim을 통해 .sh 파일 안에 변수와 명령어를 함께 작성하면 반복적인 작업을 자동화할 수 있다.❶ 셰방(Shebang): #!/bin/bash
스크립트 맨 첫 줄에 쓰는 이 기호는 **"이 파일은 /bin/bash라는 프로그램을 사용해서 해석해라"**라고 시스템에 알려주는 선언문이다.

이게 없으면 시스템은 어떤 엔진으로 코드를 읽어야 할지 몰라 에러가 나거나 엉뚱하게 동작할 수 있다.

❷ 쉘 변수의 확장 (Dynamic Variables)
변수에 고정된 문자만 넣는 게 아니라, 명령어의 실행 결과를 변수에 담을 수 있다.

Bash
# $(명령어) 형식을 사용하여 명령어 결과를 변수에 대입
today=$(date +%Y-%m-%d) 
current_user=$(whoami)
❸ 쉘 스크립트 실행 권한
스크립트 파일은 만든 직후에는 '일반 문서'일 뿐이다. 이를 '실행 파일'로 바꾸려면 권한 설정이 필수다.

Bash
chmod +x todayshell.sh  # 실행(x) 권한 추가
./todayshell.sh         # 현재 폴더(./)의 스크립트 실행
6. 실무에서 cd를 활용한 쉘 스크립트 구조
아까 우리가 이야기한 방법 2를 코드로 구현하면 이런 모양이 된다.

Bash
#!/bin/bash

# 1. 환경 설정 (변수 정의)
BACKUP_ROOT="/home/ubuntu/backups"
TARGET_DIR="/var/www/html/01_Dental_clinic"
DATE=$(date +%Y%m%d)

# 2. 작업 위치로 이동 (중요!)
# 절대 경로로 이동하여 스크립트 실행 위치에 상관없이 동작하게 만듦
cd $TARGET_DIR || exit  # 이동 실패 시 스크립트 종료(안전장치)

# 3. 압축 실행
# 현재 폴더(.) 내의 파일들을 압축하여 백업 폴더로 저장
tar -czvf $BACKUP_ROOT/backup_$DATE.tar.gz .
💡 DevOps 엔지니어의 깨달음 (추가 메모)
로그 확인: 쉘 스크립트를 짤 때는 tar -cvf에서 v(verbose) 옵션을 쓰는 습관이 좋다. 자동화 실행 시 어떤 파일들이 처리되었는지 로그로 남길 수 있기 때문이다.

경로 관리: cd를 활용하면 압축 파일 내부에 불필요한 상위 경로가 포함되는 것을 방지할 수 있어, 추후 복구(Recovery) 작업 시 매우 편리하다.
