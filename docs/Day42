🚀 [TIL] 2026-02-12: curl을 이용한 서버 알림 자동화

1. 오늘 배운 것 (Summary)
curl: 터미널에서 웹사이트와 통신하는 도구. (서버의 무전기 역할)

Webhook: 특정 이벤트 발생 시 실시간으로 알림을 보내주는 기능.

따옴표 정공법: 변수를 포함한 JSON 데이터를 보낼 때의 따옴표 규칙 마스터.

2. 핵심 옵션 (curl Options)
-X POST: 데이터를 서버로 전송하는 방식 지정.
-H "Content-Type: application/json": 전송하는 데이터가 JSON 양식임을 명시.
-d (Data): 전송할 실제 데이터 내용.

3. 따옴표 지옥 정복 (Quote Mastery)
변수를 포함한 JSON 데이터를 보낼 때의 핵심 규칙:
큰따옴표(" ")로 감싸기: 변수($)를 해석(Expansion)하기 위해 필수.
이스케이프(\") 사용: 큰따옴표 안에서 진짜 큰따옴표 글자를 표현하기 위해 \를 붙임.
작은따옴표(' '): 변수가 없을 때 사용하며, 안의 모든 것을 글자 그대로 처리(철벽 방어).



💻 실습 코드 
Bash
#!/bin/bash

# 변수 지정
SERVER_NAME=$(hostname)
CURRENT_TIME=$(date "+%Y-%m-%d %H:%M:%S")
MESSAGE="🚀 [$SERVER_NAME] 알림 연습 완료! ($CURRENT_TIME)"

# curl 전송 (따옴표 주의!)
curl -X POST -H "Content-Type: application/json" \
-d "{\"content\": \"$MESSAGE\"}" \
[디스코드_웹후크_주소]


4. 트러블 슈팅 (Trouble Shooting)
문제: \ (백슬래시) 기호 뒤에 공백(Space)이 있으면 명령어가 끊김.
해결: \ 뒤에는 바로 엔터를 쳐야 줄바꿈 기호로 인식됨.
문제: 작은따옴표(' ') 안에서는 변수가 작동하지 않음.

해결: 변수를 써야 할 때는 반드시 큰따옴표(" ")를 사용하고 내부 따옴표를 이스케이프(\") 처리함.

💡 오늘의 한마디 
curl 까지 배우니까 이제 쉘스크립트의 사용 흐름이 잡혔다 ! 
쉘스크립트로 명령어 뭉치를 만들고, 그안에 필요하면 curl 알림 명령어도 입력하고, 만든 쉘스크립트가 정해진 시간마다 자동실행 되길 원하면 crontab -e 안에 원하는시간과 /bin/bash/절대경로.sh를 하면 된다는걸 깨달았다. 
아직 변수나 if for 같은것들이 익숙하지 않아서 실수가 많지만. 그래도 큰 흐름이 잡혀서 기쁘다 
