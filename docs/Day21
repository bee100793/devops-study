### 📅 Day 10: 네트워크 진단 & 프로세스 제어 (26.01.21)

**목표:** 내 컴퓨터의 주소(IP)를 확인하고, 멈춰버린 프로그램(좀비 프로세스)을 강제로 종료한다.

#### 1. 네트워크 필수 명령어 (연결의 3단계)
서버가 고장 났을 때, 원인을 좁혀가는 **청진기** 같은 도구들.  (웹페이지가 안되요~~~ ㅠㅠ)

| 명령어 | 역할 | 비유 (치과 ver) | 실무 용도 | 해결방법 |
|:---:|:---|:---|:---|
| `ip addr` | **내 주소** 확인 | 병원 주소지 확인 | 내 서버 IP가 제대로 설정됐나? | 랜카드, 랜선확인 / sudo dhclient / 업자부르기  
| `ping [8.8.8.8]` | **도로 연결** 확인 | 환자에게 전화 걸어보기 | 인터넷 선은 연결되어 있나? | 랜선확인 / 공유기 코드 확인 / 통신사에 물어보기 
| `curl [localhost]` | **데이터 요청** (웹) | 진료 시작 (입 벌려보세요) | 내 웹 서버 프로그램이 켜져 있나? | sudo systemctl restart nginx 로 프로그램 재부팅 / sudo ufw allow 80 으로 방화벽풀기  

>  + ) 사설 IP 를 알아야 할때: 내부 서버 끼리 소통할때  필요  [ ip addr] 
       공유 IP 를 알아야 할: 외부 서버랑 소통할때 필요. [ curl ifconfig.me ] 
      
       문제발생시  엔지니어들은 안에서 부터  밖으로 정검 함 
        Step 1] 내 몸 상태 확인 (ip addr)
               "내 컴퓨터에 랜카드는 잘 꽂혀 있나? 사설 IP는 잘 받았나?"
              👉 여기서 안 되면: 컴퓨터 고장.

       Step 2] 프로그램 확인 (netstat / curl localhost)
              "내 사설 IP(172.x.x.x)나 로컬호스트(127.0.0.1)로 접속이 되나?"
             👉 여기서 안 되면: 서버 프로그램(파이썬 등)이 죽은 것.

       Step 3] 외부 연결 확인 (curl ifconfig.me)
               "이제 밖으로 나갈 수 있나?"
             👉 여기서 안 되면: 인터넷 회선이나 공유기 문제.

       Step 4] 외부에서 접속 (핸드폰 LTE로 접속)
               "남들이 들어올 수 있나?"
             👉 여기서 안 되면: 방화벽 문제.




#### 2. 프로세스 관리 & 멀티태스킹의 기술 
서버가 지금 뭐가 문제인지 파악하고 말 안듣는 애들 강제 종료 등 관리. 
터미널 하나에서 여러 작업을 동시에 돌리고 관리하는 법.

* **실습 시나리오:** `sleep 10000`으로 10,000초 동안 자는 척하는 프로그램을 만들고 제어함.

| 상태/동작 | 명령어/키 | 설명 |
|:---:|:---:|:---|
| **현재 서버상태 확인하기**| ps aux , htop (%cpu ,%mem ,stat 등 확인) / ps  -el (NI 우선순위 확인)
| **백그라운드 실행** | `명령어 &` | "뒤에 가서 조용히 실행해." (터미널 계속 사용 가능) |
| **잠시 멈춤** | `Ctrl + Z` | 실행 중인 프로그램을 일시 정지(Suspend) 시킴. |
| **다시 실행** | `bg` / `fg [대기표]` | 멈춘 놈을 뒤(Background) 또는 앞(Foreground)에서 다시 돌림. |
| **목록 확인** | `jobs` | 현재 터미널에서 백그라운드/멈춤 상태인 작업 보기. |
| **강제 종료** | `kill -9 [%대기표 ,PID]` | **확인사살.** 말 안 듣거나 멈춘 애를 OS가 강제로 끄게 함. 일시정지된건  그냥 kill 하면 안됨.|
                                         
+)
 ctrl + Z : 일단 정지 상태로 백으로 보냄
 bg  : 백으로 간 정지상태 프로세서를 작동시킴 
 &   : 바로 작동시키 상태로 백으로 보냄
 


#### 📝 오늘의 트러블 슈팅 (Troubleshooting)

**1. Nano 에디터가 `Ctrl+Z`로 안 꺼질 때**
* **문제:** Nano 화면에서 `Ctrl+Z`를 눌렀더니 `[ To suspend, type ^T^Z ]`라는 안내만 뜸.
* **해결:** Nano 설정 파일(`~/.nanorc`)을 열고 `set suspend` 한 줄을 추가해 줌. 이제 한 방에 나감!

**2. 멈춘(Stopped) 프로세스가 죽지 않음**
* **문제:** `Ctrl+Z`로 멈춰둔 작업에 `kill %1`을 날렸는데, `jobs`로 보니 여전히 살아있음.
* **원인:** 멈춰있는(Stopped) 프로세스는 뇌가 정지돼서 "종료해라(SIGTERM)"라는 신호를 못 들음.
* **해결:** `kill -9 %1` (SIGKILL)을 사용해서 강제로 메모리에서 삭제함.

#### 💡 회고
* 처음엔 창을 두 개 띄워야 하나 했지만, `&`와 `jobs`를 쓰면 창 하나에서도 멀티태스킹이 가능하다는 걸 깨달았다.
* `kill` 뒤에 붙는 `-9`가 얼마나 왜 필요한지 좀비 프로세스를 죽여보며 체감했다.

