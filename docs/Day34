# 📅 Day 33: 쉘 스크립트 조건문 (if) 정복하기 
> **핵심 주제:** 조건문(`if`)을 활용한 흐름 제어와 방어적 코딩 (Defensive Coding)

1. if 기본 구조

if [ 조건 ]; then
    # 조건이 참일 때 실행
elif [ 다른조건 ]; then
    # 다른 조건이 참일 때 실행
else
    # 모두 아닐 때 실행
fi  # if를 거꾸로 한 fi로 닫아줌!


2. if 조건문의 '주의 사항'
-대괄호 [ ] 사이의 공백은 필수!
if [$A == $B] (X) -> 에러 발생

if [ $A == $B ] (O) -> 반드시 양 끝에 한 칸씩 띄워야 함.

-변수는 항상 따옴표 "$ "로 감싸기!
if [ $1 == "bee" ] 라고 썼는데 $1이 비어있으면 에러남.

if [ "$1" == "bee" ] 처럼 감싸줘야 한다.

-then의 위치
if [ 조건 ] 바로 다음 줄에 then을 쓰거나, 같은 줄에 쓰고 싶으면 ;를 붙여야 함. (if [ ]; then)



3. 가장 많이 쓰는 '조건 옵션'
파일/폴더 체크:

-d 폴더명: 폴더(Directory)가 존재하면 참

-f 파일명: 일반 파일(File)이 존재하면 참

-e 이름: 파일이든 폴더든 존재만 하면 참

문자열 체크:

-z "문자열": 문자열 길이가 0이면(비어있으면) 참 (파라미터 $1 체크할 때 필수!)

-n "문자열": 문자열이 비어있지 않으면 참

"$A" == "$B": 두 문자가 같으면 참

숫자 비교 :

-gt: 크다 (Greater Than)

-lt: 작다 (Less Than)

-ge: 크거나 같다

-le: 작거나 같다

-eq: 같다 (Equal)



4 .오늘의 트러블 슈팅 
1. unexpected EOF 에러
원인: 변수나 문자열을 감싸는 따옴표(")의 짝이 맞지 않아서 발생.

해결: if [ "${answer}" == "y" ]; 처럼 열고 닫는 따옴표 개수(4개)를 정확히 맞춤.

2. 논리 오류 (Logic Error)
현상: 백업을 완료했는데도 마지막에 "파일이 없습니다"라는 메시지가 또 출력됨.

원인: 바깥쪽 if문에 else 처리를 하지 않아서, 코드가 끝까지 실행되어버림.

해결: 파일이 없을 때만 실행되도록 else 구문을 명확히 추가하여 흐름을 분리함.






## 💻 실습 코드: 안전한 백업 스크립트 (`if_backup.sh`)

사용자가 백업을 원할 때만(`y`), 그리고 파일이 실제로 존재할 때만 동작하는 스마트한 스크립트입니다.

```bash
#!/bin/bash

# 1. 대상 파일 지정
FILENAME="aaa.log"

# 2. 파일 존재 여부 확인 (1차 검문)
# [ -f 파일명 ] : 파일이 존재하면 참(True)
if [ -f "${FILENAME}" ]; then
    
    # 3. 사용자 의사 확인 (-n 옵션은 줄바꿈 방지)
    echo -n "${FILENAME} 파일이 존재합니다. 백업을 할까요? (y/n): "
    read answer

    # 4. 답변에 따른 분기 처리 (2차 검문)
    # 문자열 비교는 == 를 사용하며, 변수는 따옴표로 감싸는 것이 안전함
    if [ "${answer}" == "y" ]; then
        echo "백업을 진행합니다..."
        
        # tar 옵션: c(생성), z(gzip압축), v(과정출력), f(파일명지정)
        # 전체를 따옴표로 감싸서 파일명에 공백이 있어도 에러 방지
        tar -czvf "backup_${FILENAME}.tar.gz" "${FILENAME}"
        
        echo "백업 완료!"
    else
        echo "백업을 취소했습니다."
    fi

else
    # 5. 파일이 없을 경우 예외 처리 (Logic Fall-through 방지)
    echo "⚠️ 오류: ${FILENAME} 파일이 없습니다."
fi


















